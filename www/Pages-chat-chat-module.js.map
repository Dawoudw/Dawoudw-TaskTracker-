{"version":3,"sources":["./src/app/Pages/chat/chat.page.html","./src/app/Pages/chat/chat-routing.module.ts","./src/app/Pages/chat/chat.module.ts","./src/app/Pages/chat/chat.page.scss","./src/app/Pages/chat/chat.page.ts"],"names":[],"mappings":"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","file":"Pages-chat-chat-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\" class=\\\"ion-margin-right\\\">\\n      <ion-back-button\\n        text=\\\"\\\"\\n        defaultHref=\\\"tasktracker/group-chat\\\"\\n      ></ion-back-button>\\n    </ion-buttons>\\n    <!-- <ion-title>{{ chat?.title }}</ion-title> -->\\n\\n    <ion-chip class=\\\"ion-margin-start\\\" color=\\\"primary\\\">\\n      <ion-avatar>\\n        <text-avatar text=\\\"{{chatTitle}}\\\"></text-avatar>\\n      </ion-avatar>\\n      <ion-label>{{ chatTitle }}</ion-label>\\n    </ion-chip>\\n    <ion-buttons slot=\\\"end\\\">\\n      <!-- <ion-button  fill=\\\"clear\\\" (click)=\\\"leave()\\\">\\n        Leave Group\\n      </ion-button> -->\\n      <!-- <ion-button *ngIf=\\\"leaveGroupFlag\\\" fill=\\\"clear\\\" (click)=\\\"leave()\\\">\\n        Leave\\n      </ion-button> -->\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content #content class=\\\"ion-padding\\\">\\n  <ion-list\\n    class=\\\"ion-no-padding ion-no-margin\\\"\\n    lines=\\\"none\\\"\\n    detail=\\\"false\\\"\\n    ngDefaultControl\\n    [(ngModel)]=\\\"messages\\\"\\n    name=\\\"lstmessages\\\"\\n    #lstmessages\\n    *ngFor=\\\"let message of messages | async\\\"\\n  >\\n    <!-- <strong> <small>{{ message.user }} </small></strong><br />\\n        <span\\n          >{{ message.msg }}\\n          <img [src]=\\\"message.file\\\" *ngIf=\\\"message.file\\\" />\\n        </span>\\n\\n        <div class=\\\"time ion-text-right\\\">\\n          <br />{{ message.createdAt?.toMillis() | date:'short' }}\\n        </div> -->\\n\\n    <ion-chip\\n      *ngIf=\\\"message.from !== currentFirebaseUserId\\\"\\n      slot=\\\"end\\\"\\n      color=\\\"warning\\\"\\n      outline=\\\"false\\\"\\n      style=\\\"height: auto; float: left !important\\\"\\n    >\\n      <ion-label>\\n       <small><b> {{ message.user }}</b></small>\\n        <ion-note\\n          ><p>{{message.msg}}</p>\\n\\n          <ion-label position=\\\"stacked\\\">\\n            <img [src]=\\\"message.file\\\" *ngIf=\\\"message.file\\\" />\\n            <ion-note position=\\\"stacked\\\"\\n              ><p>\\n                <small class=\\\"time ion-text-right\\\"\\n                  >{{ message.createdAt?.toMillis() | date:'short' }}</small\\n                >\\n              </p>\\n            </ion-note></ion-label\\n          >\\n        </ion-note>\\n      </ion-label>\\n      <!--  -->\\n    </ion-chip>\\n\\n    <ion-chip\\n      *ngIf=\\\"message.from === currentFirebaseUserId\\\"\\n      slot=\\\"end\\\"\\n      color=\\\"secondary\\\"\\n      style=\\\"height: auto; float: right !important\\\"\\n    >\\n      <ion-label>\\n        <small><b> {{ message.user }}</b></small>\\n        <ion-note\\n          ><p>{{message.msg}}</p>\\n\\n          <ion-label position=\\\"stacked\\\">\\n            <img [src]=\\\"message.file\\\" *ngIf=\\\"message.file\\\" />\\n            <ion-note position=\\\"stacked\\\"\\n              ><p>\\n                <small class=\\\"time ion-text-right\\\"\\n                  >{{ message.createdAt?.toMillis() | date:'short' }}</small\\n                >\\n              </p>\\n            </ion-note></ion-label\\n          >\\n        </ion-note>\\n      </ion-label>\\n      <!-- <small class=\\\"time ion-text-right\\\">{{ message.createdAt?.toMillis() | date:'short' }}</small> -->\\n      <!-- <ion-label>\\n        <ion-label position=\\\"fixed\\\">\\n          <b> <small>{{ message.user }} </small></b></ion-label\\n        >\\n        <ion-label> <ion-text> {{ message.msg}} </ion-text></ion-label>\\n        <ion-label>\\n          <p><img [src]=\\\"message.file\\\" *ngIf=\\\"message.file\\\" /></p>\\n        </ion-label>\\n        <ion-label>\\n          <ion-note class=\\\"time ion-text-right\\\">\\n            <p>\\n              <small>{{ message.createdAt?.toMillis() | date:'short' }}</small>\\n            </p>\\n          </ion-note>\\n        </ion-label>\\n      </ion-label> -->\\n    </ion-chip>\\n  </ion-list>\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button size=\\\"small\\\">\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </ion-fab-button>\\n    <ion-fab-list side=\\\"top\\\">\\n      <ion-fab-button (click)=\\\"sendFileCamera()\\\">\\n        <ion-icon name=\\\"camera\\\"></ion-icon>\\n      </ion-fab-button>\\n      <ion-fab-button (click)=\\\"sendFileGallery()\\\">\\n        <ion-icon name=\\\"image\\\"></ion-icon>\\n      </ion-fab-button>\\n    </ion-fab-list>\\n  </ion-fab>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size=\\\"10\\\">\\n          <ion-textarea\\n            class=\\\"message-input\\\"\\n            rows=\\\"1\\\"\\n            [(ngModel)]=\\\"newMsg\\\"\\n          ></ion-textarea>\\n        </ion-col>\\n        <ion-col size=\\\"2\\\">\\n          <!-- style=\\\"padding-bottom: 20px;\\\" -->\\n          <ion-button\\n            fill=\\\"clear\\\"\\n            color=\\\"primary\\\"\\n            [disabled]=\\\"newMsg === ''\\\"\\n            (click)=\\\"sendMessage()\\\"\\n          >\\n            <ion-icon name=\\\"send\\\" slot=\\\"icon-only\\\"></ion-icon>\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-toolbar>\\n  <!-- <ion-toolbar color=\\\"light\\\">\\n    <ion-item>\\n      <ion-row>\\n        <ion-col size=\\\"10\\\">\\n          <ion-textarea class=\\\"message-input\\\" #input rows=\\\"1\\\" maxLength=\\\"500\\\" (keyup)=\\\"resize()\\\" \\n          [(ngModel)]=\\\"newMsg\\\"></ion-textarea>\\n        </ion-col>\\n        <ion-col size=\\\"2\\\">\\n          <ion-button fill=\\\"clear\\\" color=\\\"primary\\\" [disabled]=\\\"newMsg === ''\\\" (click)=\\\"sendMessage()\\\">\\n            <ion-icon name=\\\"send\\\" slot=\\\"icon-only\\\"></ion-icon>\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-item>\\n  </ion-toolbar> -->\\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChatPage } from './chat.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatPage\n    \n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChatPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { ChatPageRoutingModule } from \"./chat-routing.module\";\nimport{TextAvatarModule} from '../../directives/text-avatar.directive.module'\nimport { ChatPage } from \"./chat.page\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TextAvatarModule,\n    ChatPageRoutingModule,\n  ],\n  declarations: [ChatPage],\n})\nexport class ChatPageModule {}\n","export default \".message {\\n  padding: 10px !important;\\n  border-radius: 10px !important;\\n  margin-bottom: 4px !important;\\n}\\n.message img {\\n  width: 100%;\\n}\\n.my-message {\\n  background: darkslategray;\\n  color: black;\\n  font-size: small;\\n}\\n.other-message {\\n  background: #3d3b3b;\\n  color: black;\\n  font-size: small;\\n}\\n.time {\\n  color: var(--ion-color-medium);\\n  float: right;\\n  font-size: x-small;\\n  font-style: italic;\\n}\\n.message-input {\\n  width: 100%;\\n  border: 1px solid var(--ion-color-secondary);\\n  border-radius: 10px;\\n  background: white;\\n  color: black;\\n  resize: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90ZWphc3JhbWFuaS9PdGhlci13ZWJkZXYvaW9uaWMvVGFzay1UcmFja2VyLURldjIwMjAwODMwL3NyYy9hcHAvUGFnZXMvY2hhdC9jaGF0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvUGFnZXMvY2hhdC9jaGF0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHdCQUFBO0VBQ0EsOEJBQUE7RUFDQSw2QkFBQTtBQ0NGO0FEQ0U7RUFDRSxXQUFBO0FDQ0o7QURFQTtFQUNFLHlCQUFBO0VBRUEsWUFBQTtFQUNBLGdCQUFBO0FDQUY7QURHQTtFQUtFLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0FDSkY7QURPQTtFQUVFLDhCQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7QUNMRjtBRFFBO0VBQ0UsV0FBQTtFQUNBLDRDQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0FDTEYiLCJmaWxlIjoic3JjL2FwcC9QYWdlcy9jaGF0L2NoYXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1lc3NhZ2Uge1xuICBwYWRkaW5nOiAxMHB4ICFpbXBvcnRhbnQ7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHggIWltcG9ydGFudDtcbiAgbWFyZ2luLWJvdHRvbTogNHB4ICFpbXBvcnRhbnQ7XG5cbiAgaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxufVxuLm15LW1lc3NhZ2Uge1xuICBiYWNrZ3JvdW5kOiBkYXJrc2xhdGVncmF5O1xuICAvLyBiYWNrZ3JvdW5kOiByZ2IoMjE2LCAyNTIsIDI1Myk7XG4gIGNvbG9yOiByZ2IoMCwgMCwgMCk7XG4gIGZvbnQtc2l6ZTogc21hbGw7XG4gIC8vIGNvbG9yOiAjZmZmO1xufVxuLm90aGVyLW1lc3NhZ2Uge1xuICAvLyBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcbiAgLy8gY29sb3I6ICNmZmY7XG4gIC8vIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG4gIC8vIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNDUsIDIxNiwgMC45ODYpO1xuICBiYWNrZ3JvdW5kOiByZ2IoNjEsIDU5LCA1OSk7XG4gIGNvbG9yOiByZ2IoMCwgMCwgMCk7XG4gIGZvbnQtc2l6ZTogc21hbGw7XG59XG5cbi50aW1lIHtcbiAgLy8gY29sb3I6ICNkZmRmZGY7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBmb250LXNpemU6IHgtc21hbGw7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbn1cblxuLm1lc3NhZ2UtaW5wdXQge1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJhY2tncm91bmQ6IHJnYigyNTUsIDI1NSwgMjU1KTtcbiAgY29sb3I6IHJnYigwLCAwLCAwKTtcbiAgcmVzaXplOiBub25lO1xufVxuIiwiLm1lc3NhZ2Uge1xuICBwYWRkaW5nOiAxMHB4ICFpbXBvcnRhbnQ7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHggIWltcG9ydGFudDtcbiAgbWFyZ2luLWJvdHRvbTogNHB4ICFpbXBvcnRhbnQ7XG59XG4ubWVzc2FnZSBpbWcge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLm15LW1lc3NhZ2Uge1xuICBiYWNrZ3JvdW5kOiBkYXJrc2xhdGVncmF5O1xuICBjb2xvcjogYmxhY2s7XG4gIGZvbnQtc2l6ZTogc21hbGw7XG59XG5cbi5vdGhlci1tZXNzYWdlIHtcbiAgYmFja2dyb3VuZDogIzNkM2IzYjtcbiAgY29sb3I6IGJsYWNrO1xuICBmb250LXNpemU6IHNtYWxsO1xufVxuXG4udGltZSB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBmb250LXNpemU6IHgtc21hbGw7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbn1cblxuLm1lc3NhZ2UtaW5wdXQge1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBjb2xvcjogYmxhY2s7XG4gIHJlc2l6ZTogbm9uZTtcbn0iXX0= */\";","import { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { Observable } from 'rxjs';\nimport { ChatService } from 'src/app/Services/chat.service';\nimport { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { IonContent } from '@ionic/angular';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.page.html',\n  styleUrls: ['./chat.page.scss'],\n})\nexport class ChatPage implements OnInit {\n  constructor(\n    private route: ActivatedRoute,\n    private chatService: ChatService, \n    private router: Router, \n    private camera: Camera\n  ) { }\n\n  messages: Observable<any[]>;\n  newMsg = '';\n  chatTitle = '';\n  currentFirebaseUserId = this.chatService.currentUserIdFromFirebaseSetFromHomePage;\n  currentUserEmail = this.chatService.currentUser.email;\n  // currentUserId = this.chatService.currentUserIdFromFirebaseSetFromHomePage;\n  // currentUserId = JSON.parse(localStorage.getItem(\"clientIdFirebase\"));\n  // currentUserId = this.chatService.currentUserIdFromFireabase;\n  chat = null;\n  leaveGroupFlag: Boolean;\n\n  @ViewChild(IonContent) content: IonContent;\n  @ViewChild('input', { read: ElementRef }) msgInput: ElementRef;\n\n\n  ngOnInit() {\n    //getting firebase userid if not found\n    if(this.currentFirebaseUserId == null || this.currentFirebaseUserId == '') {\n      console.log(\"firebase userid not found\");\n      let user = this.chatService.findUser(this.currentUserEmail);\n      //console.log(user);  //observable\n      user.subscribe((result) => {\n        // console.log(\"firebase user id retrieved =\"+result[0].id);\n        this.chatService.currentUserIdFromFirebaseSetFromHomePage = result[0].id;\n        this.currentFirebaseUserId = result[0].id;\n      });\n    }\n    setTimeout(() => {\n      console.log(\n        \"check firebase user id here =\" +\n          this.currentFirebaseUserId\n      );\n      // //scroll to bottom on init\n      // this.scrollToBottomOnInit();\n      this.route.params.subscribe(data => {\n              // // path: 'chat/:groupId/:CurrentUserIdFromFirebase',\n              // this.route.params.subscribe(data => {\n              //   // console.log(\"data\");\n              //   // console.log(\"data['groupId'] =\"+data['groupId']);\n              //   // console.log(\"data['groupId'] =\"+data['CurrentUserIdFromFirebase']);\n        // console.log(data);\n        console.log(\"group id received =\"+data.id);\n        this.chatService.getOneGroup(data.id).subscribe(res => {\n          // console.log(res);\n          // console.log(\"this.currentUserId\");\n          // console.log(this.currentUserId);\n          \n          //setting title for this chat page\n          if(res['type']=='OneOnOne'){\n            // console.log(res['users']);\n            res['users'].forEach(element => {\n              console.log(element);\n              console.log(element['id']);\n              if(element['id'] != this.currentFirebaseUserId) {\n                // console.log(\"this is the other user's nickname\");\n                // console.log(element['nickname']);\n                this.chatTitle = element['userName'];\n              }\n            });\n            // this.chatTitle = this.getMsgFromName(this.currentUserId);\n            // console.log(this.chatTitle);\n          } \n          if(res['type']=='group') {\n            this.chatTitle = res['title'];\n            this.leaveGroupFlag = true;\n          }\n  \n          this.chat = res;\n          // console.log('my chat: ', this.chat);\n          // console.log(\"users: \");\n          // console.log(this.chat.users);\n          this.messages = this.chatService.getChatMessages(this.chat.id).pipe(\n            map(messages => {\n              for (let msg of messages) {\n                // console.log(\"msg\");\n                // console.log(msg);\n                msg['user'] = this.getMsgFromName(msg['from']);\n              }\n              // console.log('messages: ', messages);\n              \n              //scroll to bottom on init\n              this.scrollToBottomOnInit();\n              return messages;\n            })\n          );\n        })\n      })\n    }, 2000);\n  \n\n\n  }\n\n  //function for scroll to bottom\n  scrollToBottomOnInit() {\n    setTimeout(() => {\n        if (this.content.scrollToBottom) {\n            this.content.scrollToBottom(400);\n        }\n    }, 500);\n  }   \n\n\n  getMsgFromName(userId) {\n    for (let usr of this.chat.users) {\n      if (usr.id == userId) {\n        return usr.userName;\n      }\n    }\n    return 'Deleted';\n  }\n\n  sendMessage() {\n    this.chatService.addChatMessage(this.newMsg, this.chat.id).then(() => {\n      this.newMsg = '';\n      // this.content.scrollToBottom();\n      //for autoscrolling to bottom...\n      setTimeout(() => {\n        this.content.scrollToBottom(200);\n      });\n    });\n  }\n\n  // resize() {\n  //   this.msgInput.nativeElement.style.height = this.msgInput.nativeElement.scrollHeight + 'px';\n  // }\n\n  sendFileCamera() {\n    const options: CameraOptions = {\n      quality: 70,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      sourceType: this.camera.PictureSourceType.CAMERA,\n      correctOrientation: true\n    }\n\n    this.camera.getPicture(options).then(data => {\n      let obj = this.chatService.addFileMessage(data, this.chat.id);\n      let task = obj.task;\n      task.then(res => {\n        obj.ref.getDownloadURL().subscribe(url => {\n          this.chatService.saveFileMessage(url, this.chat.id);\n        })\n      });\n\n      task.percentageChanges().subscribe(change => {\n        // console.log('change: ', change);\n      })\n    });\n\n    \n  }\n\n  sendFileGallery() {\n    const options: CameraOptions = {\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      quality: 70,\n      targetWidth: 1000,\n      targetHeight: 1000,\n      encodingType: this.camera.EncodingType.JPEG,\n      correctOrientation: true\n      // mediaType: this.camera.MediaType.PICTURE,\n    }\n\n    this.camera.getPicture(options).then(data => {\n      let obj = this.chatService.addFileMessage(data, this.chat.id);\n      let task = obj.task;\n      task.then(res => {\n        obj.ref.getDownloadURL().subscribe(url => {\n          this.chatService.saveFileMessage(url, this.chat.id);\n        })\n      });\n\n      task.percentageChanges().subscribe(change => {\n        // console.log('change: ', change);\n      })\n    });\n  }\n\n\n\n\n\n\n\n}"],"sourceRoot":"webpack:///"}
{"version":3,"sources":["./src/app/Pages/chat/chat.page.html","./src/app/Pages/chat/chat-routing.module.ts","./src/app/Pages/chat/chat.module.ts","./src/app/Pages/chat/chat.page.scss","./src/app/Pages/chat/chat.page.ts"],"names":[],"mappings":"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","file":"Pages-chat-chat-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/chats\\\"></ion-back-button>\\n    </ion-buttons>\\n    <!-- <ion-title>{{ chat?.title }}</ion-title> -->\\n    <ion-title>{{ chatTitle }}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <!-- <ion-button  fill=\\\"clear\\\" (click)=\\\"leave()\\\">\\n        Leave Group\\n      </ion-button> -->\\n      <!-- <ion-button *ngIf=\\\"leaveGroupFlag\\\" fill=\\\"clear\\\" (click)=\\\"leave()\\\">\\n        Leave\\n      </ion-button> -->\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n\\n<ion-content #content class=\\\"ion-padding\\\">\\n\\n  <ion-grid>\\n      <ion-row *ngFor=\\\"let message of messages | async\\\">\\n\\n        <ion-col size=\\\"9\\\" size-md=\\\"6\\\" *ngIf=\\\"message.from !== currentUserId\\\" class=\\\"message other-message\\\">\\n          <small>{{ message.user }}</small><br>\\n          <span>{{ message.msg }}\\n            <img [src]=\\\"message.file\\\" *ngIf=\\\"message.file\\\">\\n          </span>\\n  \\n          <div class=\\\"time ion-text-right\\\"><br>{{ message.createdAt?.toMillis() | date:'short' }}</div>\\n        </ion-col>\\n  \\n        <ion-col offset=\\\"3\\\" offset-md=\\\"6\\\" size=\\\"9\\\" size-md=\\\"6\\\" *ngIf=\\\"message.from === currentUserId\\\" class=\\\"message my-message\\\">\\n        <small>{{ message.user }}</small><br>\\n          <span>{{ message.msg }}\\n            <img [src]=\\\"message.file\\\" *ngIf=\\\"message.file\\\">\\n          </span>\\n          <div class=\\\"time ion-text-right\\\"><br>{{ message.createdAt?.toMillis() | date:'short' }}</div>\\n        </ion-col>\\n  \\n      </ion-row>\\n    </ion-grid>\\n\\n    <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n        <ion-fab-button>\\n          <ion-icon name=\\\"add\\\"></ion-icon>\\n        </ion-fab-button>\\n        <ion-fab-list side=\\\"top\\\">\\n          <ion-fab-button  (click)=\\\"sendFileCamera()\\\"> \\n            <ion-icon name=\\\"camera\\\"></ion-icon>\\n          </ion-fab-button>\\n          <ion-fab-button  (click)=\\\"sendFileGallery()\\\">\\n            <ion-icon name=\\\"image\\\"></ion-icon>\\n          </ion-fab-button>\\n        </ion-fab-list>\\n    </ion-fab>\\n      \\n    \\n\\n\\n</ion-content>\\n\\n<ion-footer>\\n<ion-toolbar>\\n<ion-grid>\\n  <ion-row>\\n    <ion-col size=\\\"10\\\">\\n      <ion-textarea class=\\\"message-input\\\" rows=\\\"1\\\"\\n          [(ngModel)]=\\\"newMsg\\\"></ion-textarea>\\n    </ion-col>\\n    <ion-col size=\\\"2\\\">\\n      <!-- style=\\\"padding-bottom: 20px;\\\" -->\\n      <ion-button fill=\\\"clear\\\" color=\\\"primary\\\" [disabled]=\\\"newMsg === ''\\\" (click)=\\\"sendMessage()\\\">\\n        <ion-icon name=\\\"send\\\" slot=\\\"icon-only\\\"></ion-icon>\\n      </ion-button>\\n    </ion-col>\\n  </ion-row>\\n</ion-grid>\\n</ion-toolbar>\\n  <!-- <ion-toolbar color=\\\"light\\\">\\n    <ion-item>\\n      <ion-row>\\n        <ion-col size=\\\"10\\\">\\n          <ion-textarea class=\\\"message-input\\\" #input rows=\\\"1\\\" maxLength=\\\"500\\\" (keyup)=\\\"resize()\\\" \\n          [(ngModel)]=\\\"newMsg\\\"></ion-textarea>\\n        </ion-col>\\n        <ion-col size=\\\"2\\\">\\n          <ion-button fill=\\\"clear\\\" color=\\\"primary\\\" [disabled]=\\\"newMsg === ''\\\" (click)=\\\"sendMessage()\\\">\\n            <ion-icon name=\\\"send\\\" slot=\\\"icon-only\\\"></ion-icon>\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-item>\\n  </ion-toolbar> -->\\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChatPage } from './chat.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatPage\n    \n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChatPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatPageRoutingModule } from './chat-routing.module';\n\nimport { ChatPage } from './chat.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ChatPageRoutingModule\n  ],\n  declarations: [ChatPage]\n})\nexport class ChatPageModule {}\n","export default \".message {\\n  padding: 10px !important;\\n  border-radius: 10px !important;\\n  margin-bottom: 4px !important;\\n}\\n.message img {\\n  width: 100%;\\n}\\n.my-message {\\n  background: darkslategray;\\n  color: white;\\n}\\n.other-message {\\n  background: #3d3b3b;\\n  color: white;\\n}\\n.time {\\n  color: var(--ion-color-medium);\\n  float: right;\\n  font-size: small;\\n}\\n.message-input {\\n  width: 100%;\\n  border: 1px solid var(--ion-color-medium);\\n  border-radius: 10px;\\n  background: #272626;\\n  color: white;\\n  resize: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90ZWphc3JhbWFuaS9PdGhlci13ZWJkZXYvaW9uaWMvVGFzay1UcmFja2VyLURldjIwMjAwODI2L3NyYy9hcHAvUGFnZXMvY2hhdC9jaGF0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvUGFnZXMvY2hhdC9jaGF0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHdCQUFBO0VBQ0EsOEJBQUE7RUFDQSw2QkFBQTtBQ0NKO0FEQ0k7RUFDRSxXQUFBO0FDQ047QURFRTtFQUVFLHlCQUFBO0VBQ0EsWUFBQTtBQ0FKO0FER0U7RUFJRSxtQkFBQTtFQUNBLFlBQUE7QUNISjtBRE1BO0VBRUUsOEJBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7QUNKRjtBRE9BO0VBQ0ksV0FBQTtFQUNBLHlDQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0FDSkoiLCJmaWxlIjoic3JjL2FwcC9QYWdlcy9jaGF0L2NoYXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1lc3NhZ2Uge1xuICAgIHBhZGRpbmc6IDEwcHggIWltcG9ydGFudDtcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4ICFpbXBvcnRhbnQ7XG4gICAgbWFyZ2luLWJvdHRvbTogNHB4ICFpbXBvcnRhbnQ7XG5cbiAgICBpbWcge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxuICB9XG4gIC5teS1tZXNzYWdlIHtcbiAgICAvLyBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItdGVydGlhcnkpO1xuICAgIGJhY2tncm91bmQ6IGRhcmtzbGF0ZWdyYXk7XG4gICAgY29sb3I6d2hpdGU7XG4gICAgLy8gY29sb3I6ICNmZmY7XG4gIH1cbiAgLm90aGVyLW1lc3NhZ2Uge1xuICAgIC8vIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICAgIC8vIGNvbG9yOiAjZmZmO1xuICAgIC8vIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG4gICAgYmFja2dyb3VuZDogcmdiKDYxLCA1OSwgNTkpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuXG4udGltZSB7XG4gIC8vIGNvbG9yOiAjZGZkZmRmO1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIGZsb2F0OiByaWdodDtcbiAgZm9udC1zaXplOiBzbWFsbDtcbn1cblxuLm1lc3NhZ2UtaW5wdXQge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgYmFja2dyb3VuZDogcmdiKDM5LCAzOCwgMzgpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICByZXNpemU6IG5vbmU7XG59XG5cbiIsIi5tZXNzYWdlIHtcbiAgcGFkZGluZzogMTBweCAhaW1wb3J0YW50O1xuICBib3JkZXItcmFkaXVzOiAxMHB4ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1ib3R0b206IDRweCAhaW1wb3J0YW50O1xufVxuLm1lc3NhZ2UgaW1nIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5teS1tZXNzYWdlIHtcbiAgYmFja2dyb3VuZDogZGFya3NsYXRlZ3JheTtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ub3RoZXItbWVzc2FnZSB7XG4gIGJhY2tncm91bmQ6ICMzZDNiM2I7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLnRpbWUge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIGZsb2F0OiByaWdodDtcbiAgZm9udC1zaXplOiBzbWFsbDtcbn1cblxuLm1lc3NhZ2UtaW5wdXQge1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJhY2tncm91bmQ6ICMyNzI2MjY7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgcmVzaXplOiBub25lO1xufSJdfQ== */\";","import { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { Observable } from 'rxjs';\nimport { ChatService } from 'src/app/Services/chat.service';\nimport { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { IonContent } from '@ionic/angular';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.page.html',\n  styleUrls: ['./chat.page.scss'],\n})\nexport class ChatPage implements OnInit {\n  constructor(\n    private route: ActivatedRoute,\n    private chatService: ChatService, \n    private router: Router, \n    private camera: Camera\n  ) { }\n\n  messages: Observable<any[]>;\n  newMsg = '';\n  chatTitle = '';\n  // currentUserId = this.chatService.currentUserIdFromFirebaseSetFromHomePage;\n  // currentUserId = JSON.parse(localStorage.getItem(\"clientIdFirebase\"));\n  currentUserId = this.chatService.currentUserIdFromFireabase;\n  chat = null;\n  leaveGroupFlag: Boolean;\n\n  @ViewChild(IonContent) content: IonContent;\n  @ViewChild('input', { read: ElementRef }) msgInput: ElementRef;\n\n\n  ngOnInit() {\n    console.log(\"this.currentUserId on chat page =\"+this.currentUserId);\n    // //scroll to bottom on init\n    // this.scrollToBottomOnInit();\n    this.route.params.subscribe(data => {\n            // // path: 'chat/:groupId/:CurrentUserIdFromFirebase',\n            // this.route.params.subscribe(data => {\n            //   // console.log(\"data\");\n            //   // console.log(\"data['groupId'] =\"+data['groupId']);\n            //   // console.log(\"data['groupId'] =\"+data['CurrentUserIdFromFirebase']);\n      // console.log(data);\n      console.log(\"group id received =\"+data.id);\n      this.chatService.getOneGroup(data.id).subscribe(res => {\n        // console.log(res);\n        // console.log(\"this.currentUserId\");\n        // console.log(this.currentUserId);\n        \n        //setting title for this chat page\n        if(res['type']=='OneOnOne'){\n          // console.log(res['users']);\n          res['users'].forEach(element => {\n            // console.log(element);\n            // console.log(element['id']);\n            if(element['id'] != this.currentUserId) {\n              // console.log(\"this is the other user's nickname\");\n              // console.log(element['nickname']);\n              this.chatTitle = element['userName'];\n            }\n          });\n          // this.chatTitle = this.getMsgFromName(this.currentUserId);\n          // console.log(this.chatTitle);\n        } \n        if(res['type']=='group') {\n          this.chatTitle = res['title'];\n          this.leaveGroupFlag = true;\n        }\n\n        this.chat = res;\n        // console.log('my chat: ', this.chat);\n        // console.log(\"users: \");\n        // console.log(this.chat.users);\n        this.messages = this.chatService.getChatMessages(this.chat.id).pipe(\n          map(messages => {\n            for (let msg of messages) {\n              // console.log(\"msg\");\n              // console.log(msg);\n              msg['user'] = this.getMsgFromName(msg['from']);\n            }\n            // console.log('messages: ', messages);\n            \n            //scroll to bottom on init\n            this.scrollToBottomOnInit();\n            return messages;\n          })\n        );\n      })\n    })\n\n  }\n\n  //function for scroll to bottom\n  scrollToBottomOnInit() {\n    setTimeout(() => {\n        if (this.content.scrollToBottom) {\n            this.content.scrollToBottom(400);\n        }\n    }, 500);\n  }   \n\n\n  getMsgFromName(userId) {\n    for (let usr of this.chat.users) {\n      if (usr.id == userId) {\n        return usr.userName;\n      }\n    }\n    return 'Deleted';\n  }\n\n  sendMessage() {\n    this.chatService.addChatMessage(this.newMsg, this.chat.id).then(() => {\n      this.newMsg = '';\n      // this.content.scrollToBottom();\n      //for autoscrolling to bottom...\n      setTimeout(() => {\n        this.content.scrollToBottom(200);\n      });\n    });\n  }\n\n  // resize() {\n  //   this.msgInput.nativeElement.style.height = this.msgInput.nativeElement.scrollHeight + 'px';\n  // }\n\n  sendFileCamera() {\n    const options: CameraOptions = {\n      quality: 70,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      sourceType: this.camera.PictureSourceType.CAMERA,\n      correctOrientation: true\n    }\n\n    this.camera.getPicture(options).then(data => {\n      let obj = this.chatService.addFileMessage(data, this.chat.id);\n      let task = obj.task;\n      task.then(res => {\n        obj.ref.getDownloadURL().subscribe(url => {\n          this.chatService.saveFileMessage(url, this.chat.id);\n        })\n      });\n\n      task.percentageChanges().subscribe(change => {\n        // console.log('change: ', change);\n      })\n    });\n\n    \n  }\n\n  sendFileGallery() {\n    const options: CameraOptions = {\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      quality: 70,\n      targetWidth: 1000,\n      targetHeight: 1000,\n      encodingType: this.camera.EncodingType.JPEG,\n      correctOrientation: true\n      // mediaType: this.camera.MediaType.PICTURE,\n    }\n\n    this.camera.getPicture(options).then(data => {\n      let obj = this.chatService.addFileMessage(data, this.chat.id);\n      let task = obj.task;\n      task.then(res => {\n        obj.ref.getDownloadURL().subscribe(url => {\n          this.chatService.saveFileMessage(url, this.chat.id);\n        })\n      });\n\n      task.percentageChanges().subscribe(change => {\n        // console.log('change: ', change);\n      })\n    });\n  }\n\n\n\n\n\n\n\n}\n"],"sourceRoot":"webpack:///"}